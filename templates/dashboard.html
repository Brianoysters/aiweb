{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    {% if not current_user.is_paid %}
    <div class="alert alert-warning">
        <h4>Payment Required</h4>
        <p>Please complete your payment to access the course content, quiz, and certificate.</p>
        <a href="#" class="btn btn-primary">Complete Payment</a>
    </div>
    {% endif %}

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3>Your Courses</h3>
                </div>
                <div class="card-body">
                    {% for course in courses %}
                    <div class="course-item mb-3">
                        <h4>{{ course.title }}</h4>
                        <p>{{ course.description }}</p>
                        <div class="progress mb-2">
                            {% set completed = completed_modules|length %}
                            {% set total = course.modules|length %}
                            <div class="progress-bar" role="progressbar" 
                                 style="width: {{ (completed/total*100)|round }}%"
                                 aria-valuenow="{{ (completed/total*100)|round }}" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                {{ (completed/total*100)|round }}%
                            </div>
                        </div>
                        <a href="{{ url_for('course', course_id=course.id) }}" class="btn btn-primary">Continue Learning</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h3>Quick Actions</h3>
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="{{ url_for('quiz') }}" class="list-group-item list-group-item-action">
                            <i class="bi bi-question-circle"></i> Take Quiz
                        </a>
                        <a href="{{ url_for('certificate') }}" class="list-group-item list-group-item-action">
                            <i class="bi bi-award"></i> View Certificate
                        </a>
                        {% if current_user.is_admin %}
                        <a href="{{ url_for('admin_dashboard') }}" class="list-group-item list-group-item-action">
                            <i class="bi bi-gear"></i> Admin Dashboard
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
